#! /usr/bin/env zsh
#
# Executes commands at the start of an interactive session.
#
# Authors:
#   Sorin Ionescu <sorin.ionescu@gmail.com>
#

# Source Prezto.
if [[ -s "${ZDOTDIR:-$HOME}/.zprezto/init.zsh" ]]; then
  source "${ZDOTDIR:-$HOME}/.zprezto/init.zsh"
fi

# Customize to your needs...
export GOPATH="${HOME}/go"
export PATH="${GOPATH}/bin:${PATH}"


# Disable username in prompt
DEFAULT_USER="$(whoami)"

# Functions

# History Adjustments
SAVEHIST=100000
HIST_IGNORE_SPACE="YES"
alias exit=" exit"
alias clear=" clear"

# Rbenv initialization
if [[ -d "$HOME/.rbenv" ]]; then
  export PATH="$HOME/.rbenv/bin:$PATH"
  eval "$(rbenv init -)"
fi

# tmux aliases
if (( $+commands[tmux] )); then
  function ttmux () {
    if (( ${+TMUX} )); then
      return
    fi
    exec "tmux" "new-session" "-A" "-s" "tmux"
  }

  function codemux () {
    if (( ${+TMUX} )); then
      return
    fi
    local dir="$(basename "$(pwd)" | sed "s/[^[:alpha:]^[:digit:]]//g")"
    exec "tmux" "new-session" "-A" "-s" "code-$dir"
  }
fi

# time aliases
alias 8601="date -u +\"%FT%TZ\""

function chpwd() {
    print -Pn "\e]2;%d\007"
    ls
}

function poetry() {
    if [[ -z "${POETRY_DONT_LOAD_ENV}" && -f ".env" ]] ; then
	eval $(grep -v '^(\s*#|$)' .env | xargs) command poetry "$@"
    else
    	command poetry "$@"
    fi
}

if [[ -f "${HOME}/.sdkman/bin/sdkman-init.sh" ]] ; then
  source "${HOME}/.sdkman/bin/sdkman-init.sh"
fi

# added by travis gem
[ -f /Users/lsmith/.travis/travis.sh ] && source /Users/lsmith/.travis/travis.sh

export PYENV_ROOT="$HOME/.pyenv"
export PATH="$PYENV_ROOT/bin:$PATH"
function gi() { curl -sLw n https://www.toptal.com/developers/gitignore/api/$@ ;}

ttmux
